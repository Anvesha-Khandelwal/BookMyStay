<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hotel Listings ‚Äî BookMyStay</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="style.css">

<style>
.search-bar-mini {
  background: rgba(255,255,255,0.07);
  padding: 1.4rem;
  border-radius: 18px;
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  align-items: center;
  backdrop-filter: blur(14px);
  border: 1px solid rgba(255,255,255,0.1);
  margin-bottom: 2rem;
}

.search-item input {
  padding: 0.75rem 1rem;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.1);
  background: rgba(255,255,255,0.05);
  color: white;
  font-weight: 600;
  font-size: 0.9rem;
  outline: none;
  width: 180px;
}

.sort-wrapper {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin: 1rem 0 2rem;
}

.sort-wrapper select {
  width: 200px;
  padding: 0.8rem 1rem;
  border-radius: 12px;
  font-weight: 700;
  background: rgba(255,255,255,0.06);
  color: white;
  border: 1px solid rgba(255,255,255,0.1);
  outline: none;
  backdrop-filter: blur(12px);
}

.card {
  animation: popUp 0.4s ease;
}
@keyframes popUp {
  from{opacity:0;transform:scale(0.92);}
  to{opacity:1;transform:scale(1);}
}

@media (max-width: 600px) {
  .search-btn-mini { width: 100%; }
  .search-item input { width: 100%; }
  .sort-wrapper { flex-direction: column; padding: 1rem; }
  .sort-wrapper select { width: 100%; }
}
</style>
</head>

<body>

<nav style="background:#fff;padding:1rem 2rem;border-bottom:1px solid rgba(0,0,0,0.06);box-shadow:0 3px 14px rgba(0,0,0,0.03);position:sticky;top:0;z-index:999;">
  <div style="display:flex;justify-content:space-between;align-items:center;">
    <div style="font-weight:800;font-size:1.3rem;color:#2b3a2d;pointer-events:none;">‚ú¶ BookMyStay</div>
    <a href="login.html" style="text-decoration:none;font-weight:700;color:#004d40;background:rgba(79,209,229,0.15);padding:0.6rem 1.2rem;border-radius:20px;">Login</a>
  </div>
</nav>

<div class="page">
  <div class="search-bar-mini">
    <div class="search-item">
      <label class="search-label">üìç City</label>
      <input id="searchCity" placeholder="Enter city..." oninput="saveSearchValues()">
    </div>

    <div class="search-item">
      <label class="search-label">üìÖ Check-in</label>
      <input type="date" id="checkin" oninput="saveSearchValues()">
    </div>

    <div class="search-item">
      <label class="search-label">üìÖ Check-out</label>
      <input type="date" id="checkout" oninput="saveSearchValues()">
    </div>

    <div class="search-item">
      <label class="search-label">üë• Rooms & Guests</label>
      <input id="guests" placeholder="E.g. 1 Room, 2 Adults" oninput="saveSearchValues()">
    </div>

    <button class="search-btn" onclick="searchHotelsFromHotelPage()">Search</button>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  // Auto-fill stored search values
  document.getElementById("searchCity").value = localStorage.getItem("lastCity") || "";
  document.getElementById("checkin").value = localStorage.getItem("checkin") || "";
  document.getElementById("checkout").value = localStorage.getItem("checkout") || "";
  document.getElementById("guests").value = localStorage.getItem("guests") || "";
});

function saveSearchValues() {
  // Save inputs to localStorage
  const city = document.getElementById("searchCity").value;
  const ci = document.getElementById("checkin").value;
  const co = document.getElementById("checkout").value;
  const g = document.getElementById("guests").value;

  localStorage.setItem("lastCity", city);
  localStorage.setItem("lastCity", city);
  localStorage.setItem("checkin", ci);
  localStorage.setItem("checkout", co);
  localStorage.setItem("guests", g);
}

function searchHotelsFromHotelPage() {
  saveSearchValues(); 
  window.location.href = "listings.html"; // Redirect for real search result
}
function loadHotelDetails() {
  const selectedId = localStorage.getItem("selectedHotel");
  const hotel = hotelsData.find(h => h.id == selectedId);
  if(!hotel) return;

  document.getElementById("hotelName").textContent = hotel.name;
  document.getElementById("displayCheckin").textContent = localStorage.getItem("checkin") || "Select date";
  document.getElementById("displayCheckout").textContent = localStorage.getItem("checkout") || "Select date";
  document.getElementById("displayGuests").textContent = localStorage.getItem("guests") || "Add guests";
  document.getElementById("hotelPrice").textContent = "‚Çπ" + hotel.price.toLocaleString();
  document.getElementById("mainImage").src = hotel.image;
  document.getElementById("hotelTitle").textContent = hotel.name;
  document.getElementById("hotelDescription").textContent = hotel.description;
  document.getElementById("hotelRating").innerHTML = `<i class="fas fa-star"></i> ${hotel.rating}`;
}

let hotelsData = [];
fetch("hotels.json")
  .then(r => r.json())
  .then(d => { hotelsData = d; loadHotelDetails(); });

</script>

</body>
</html>
